<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="shortcut icon" href="todo.jpeg" type="image/x-icon">
</head>
<style>
     @media (max-width: 800px){
        .smallDeviceWidth{
            width: 80% !important;
        }
    }
</style>
<body class="bg-warning">
    <div class="smallDeviceWidth w-50 d-block mx-auto my-5">
        <p id="allDetailsRequirement" class="text-center text-danger"></p>
        <input class="form-control my-2 mx-auto" type="text" placeholder="First Name" id="firstName">
        <input class="form-control my-2 mx-auto" type="text" placeholder="Last Name" id="lastName">
        <input class="form-control my-2 mx-auto" type="email" placeholder="Email" id="eMail">
        <input class="form-control my-2 mx-auto" type="password" placeholder="Password" id="password">
        <p id="displayError" class="text-danger text-center"></p>
        <button class="w-50 my-4 mx-auto mx-auto btn btn-success d-block" onclick="signUp()">Sign Up</button>
        <a href="./todoSignInPage.html" class="text-center d-block">Already have an account?</a>
    </div>
    <script>
        let allUsers = []
        let eMailRegex = /^[\w]+[@][\w]{2,15}[.][\w]{2,15}([.][\w]{2,15})?$/
        if (localStorage.allUsers) {
            allUsers = JSON.parse(localStorage.getItem("allUsers"))
        }
        let Work = [todoToPerform = [],
            todoPerformed = []
        ]
        let Vacation = [todoToPerform = [],
            todoPerformed = []]
        let Meeting = [todoToPerform = [],
            todoPerformed = []]
        let Cooking = [todoToPerform = [],
            todoPerformed = []]
        let Health = [todoToPerform = [],
            todoPerformed = []]
        let Gift = [todoToPerform = [],
            todoPerformed = []]
        let Leisure = [todoToPerform = [],
            todoPerformed = []]
        let Payment = [todoToPerform = [],
            todoPerformed = []]
        let Others = [todoToPerform = [],
            todoPerformed = []]
        const signUp = () => {
            if (eMailRegex.test(eMail.value)) {
                if (firstName.value.trim()=="" || lastName.value.trim()=="" || eMail.value.trim()=="" || password.value.trim()=="") {
                allDetailsRequirement.innerText = `Fill in all the required information`
                setTimeout(()=>allDetailsRequirement.innerText = "", 3000)
            } else{
                let user = {
                firstName: firstName.value,
                lastName: lastName.value,
                eMail: eMail.value,
                password: password.value,
                userTodos: [
                        Work,
                        Vacation,
                        Meeting,
                        Cooking,
                        Health,
                        Gift,
                        Leisure,
                        Payment,
                        Others
                ] 
            }
            allUsers.push(user)
            localStorage.setItem("allUsers", JSON.stringify(allUsers))
            window.location.href = "todoSignInPage.html"
            }
            } else{
                displayError.innerText = "Invalid e-mail"
                setTimeout(()=>displayError.innerText="", 3000)
            }
        }
    </script>
    <script src="../bootstrap-5.2.2-dist/js/bootstrap.bundle.js"></script>
    <script src="../bootstrap-5.2.2-dist/js/bootstrap.js"></script>
</body>
</html>