<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Task Vista</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="shortcut icon" href="todo.jpeg" type="image/x-icon">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f8f9fa;
        }

        .signup-container {
            max-width: 500px;
            margin: 5% auto;
            background-color: white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 20px;
        }

        .form-control {
            margin: 10px auto;
        }

        .btn-success {
            width: 100%;
            margin: 20px auto;
        }

        .signup-link {
            text-align: center;
            margin-top: 20px;
        }

        .signup-link a {
            color: #007bff;
        }

        .brand-logo {
            width: 100%;
            max-height: 80px;
            margin-bottom: 20px;
        }

        @media (max-width: 800px) {
            .smallDeviceWidth {
                width: 80% !important;
            }
        }
    </style>
</head>
<body class="bg-light">
    <div class="smallDeviceWidth signup-container">
        <img class="brand-logo" src="todo.jpeg" alt="Task Vista Logo">

        <h2 class="text-center">Join Task Vista</h2>
        <p class="text-muted text-center">Your Task Management Solution</p>

        <form>
            <input class="form-control" type="text" placeholder="First Name" id="firstName">
            <input class="form-control" type="text" placeholder="Last Name" id="lastName">
            <input class="form-control" type="email" placeholder="Email" id="eMail">
            <input class="form-control" type="password" placeholder="Password" id="password">

            <button class="btn btn-success" onclick="signUp()">Sign Up</button>
        </form>

        <p id="allDetailsRequirement" class="text-danger mt-3"></p>
        <p id="displayError" class="text-danger text-center"></p>

        <div class="signup-link">
            <p>Already have an account? <a href="./todoSignInPage.html">Log in here</a></p>
        </div>
    </div>

    <!-- Bootstrap JS and Popper.js CDN (required for Bootstrap components) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        let allUsers = []
        let eMailRegex = /^[\w]+[@][\w]{2,15}[.][\w]{2,15}([.][\w]{2,15})?$/
        if (localStorage.allUsers) {
            allUsers = JSON.parse(localStorage.getItem("allUsers"))
        }
        let Work = [todoToPerform = [],
            todoPerformed = []
        ]
        let Vacation = [todoToPerform = [],
            todoPerformed = []]
        let Meeting = [todoToPerform = [],
            todoPerformed = []]
        let Cooking = [todoToPerform = [],
            todoPerformed = []]
        let Health = [todoToPerform = [],
            todoPerformed = []]
        let Gift = [todoToPerform = [],
            todoPerformed = []]
        let Leisure = [todoToPerform = [],
            todoPerformed = []]
        let Payment = [todoToPerform = [],
            todoPerformed = []]
        let Others = [todoToPerform = [],
            todoPerformed = []]
        const signUp = () => {
            if (eMailRegex.test(eMail.value)) {
                if (firstName.value.trim()=="" || lastName.value.trim()=="" || eMail.value.trim()=="" || password.value.trim()=="") {
                allDetailsRequirement.innerText = `Fill in all the required information`
                setTimeout(()=>allDetailsRequirement.innerText = "", 3000)
            } else{
                let user = {
                firstName: firstName.value,
                lastName: lastName.value,
                eMail: eMail.value,
                password: password.value,
                userTodos: [
                        Work,
                        Vacation,
                        Meeting,
                        Cooking,
                        Health,
                        Gift,
                        Leisure,
                        Payment,
                        Others
                ] 
            }
            allUsers.push(user)
            localStorage.setItem("allUsers", JSON.stringify(allUsers))
            window.location.href = "todoSignInPage.html"
            }
            } else{
                displayError.innerText = "Invalid e-mail"
                setTimeout(()=>displayError.innerText="", 3000)
            }
        }
    </script>
</body>
</html>
